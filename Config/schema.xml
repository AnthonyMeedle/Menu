<?xml version="1.0" encoding="UTF-8"?>
<database defaultIdMethod="native" name="thelia" namespace="Menu\Model">	
	<table name="menu">
		<column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
		<column defaultValue="0" name="visible" required="true" type="TINYINT" />
		<column defaultValue="0" name="position" required="true" type="INTEGER" />
		<column defaultValue="0" name="typobj" type="INTEGER" />
		<column defaultValue="0" name="objet" type="INTEGER" />
		<behavior name="timestampable" />
		<behavior name="versionable">
			<parameter name="log_created_at" value="true" />
			<parameter name="log_created_by" value="true" />
		</behavior>
	</table>
	<table name="menu_i18n">
		<column name="id" primaryKey="true" required="true" type="INTEGER" />
		<column name="locale" size="5" type="VARCHAR" />
		<column name="title" size="255" type="VARCHAR" />
		<column name="description" type="CLOB" />
		<column name="chapo" type="LONGVARCHAR" />
		<column name="postscriptum" type="LONGVARCHAR" />
		<behavior name="timestampable" />
		<index name="idx_menu_has_menu_i18n">
			<index-column name="id" />
		</index>
		<behavior name="versionable">
			<parameter name="log_created_at" value="true" />
			<parameter name="log_created_by" value="true" />
		</behavior>
	</table>
	<table name="menu_item">
		<column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
		<column name="menu_id" primaryKey="true" required="true" type="INTEGER" />
		<column defaultValue="0" name="visible" required="true" type="TINYINT" />
		<column defaultValue="0" name="position" required="true" type="INTEGER" />
		<column defaultValue="0" name="typobj" type="INTEGER" />
		<column defaultValue="0" name="objet" type="INTEGER" />
		<foreign-key foreignTable="menu" name="fk_menu_has_menu_item" onDelete="CASCADE" onUpdate="RESTRICT">
     	 	<reference foreign="id" local="menu_id" />
	    </foreign-key>
		<index name="idx_menu_has_menu_item">
			<index-column name="menu_id" />
		</index>
		<behavior name="timestampable" />
		<behavior name="versionable">
			<parameter name="log_created_at" value="true" />
			<parameter name="log_created_by" value="true" />
		</behavior>
	</table>
	<table name="menu_item_i18n">
		<column name="id" primaryKey="true" required="true" type="INTEGER" />
		<column name="locale" size="5" type="VARCHAR" />
		<column name="title" size="255" type="VARCHAR" />
		<column name="description" type="CLOB" />
		<column name="chapo" type="LONGVARCHAR" />
		<column name="postscriptum" type="LONGVARCHAR" />
		<behavior name="timestampable" />
		<index name="idx_menu_item_has_menu_item_i18n">
			<index-column name="id" />
		</index>
		<behavior name="versionable">
			<parameter name="log_created_at" value="true" />
			<parameter name="log_created_by" value="true" />
		</behavior>
	</table>
	
	<external-schema filename="local/config/schema.xml" referenceOnly="true" />
</database>
